$(document).ready(function(){if($('.main-menu').length){$('html').addClass('menu-wrapper');var menu_mobile=$('#navigation .base-menu').clone();$('#wrapper').before('<div class="main-menu mm-mobile-menu"></div>');$('.mm-mobile-menu').append(menu_mobile);};if($('#nav-filter').length){var filter_mobile=$('#nav-filter').clone().removeClass('col-sm-3 col-xs-12').addClass('mm-nav-filter');$('#wrapper').before(filter_mobile);$('.mm-nav-filter').prepend('<div class="mm-filter-head">Filtre</div>');};if($('.main-menu').length||$('#nav-filter').length){$('#wrapper').after('<div class="menu_slideout"><i class="fa fa-close menu-close"></i><i class="fa fa-close filter-close"></i></div>');};$(document).on('click','.menu-trg',function(){$('.menu-wrapper').addClass('menu_opened');});$(document).on('click','.filter-trg',function(){$('.menu-wrapper').addClass('filter_opened');});$(document).on('click','.menu_slideout, .menu-close, .filter-close',function(){if($('.cart_side_opened').length){$('.close-side-cart').trigger('click');};$('.menu-wrapper').removeClass('menu_opened filter_opened cart_side_opened');setTimeout(function(){$('.mm-btn-prev').click();},500);});if($('.main-menu').length){var account=$('.-g-user-icon').html();$('.mm-mobile-menu').prepend('<div class="mm-menu-head"><div class="-g-user-icon"></div><div class="flag-holder"></div><i class="fa fa-close menu-close"></i></div>');$('.mm-menu-head .-g-user-icon').append(account);if($('.acount-section .contact-header').length){$('.mm-mobile-menu').append('<div class="mm-menu-footer"><div class="contact-phone"></div></div>');$('.acount-section .contact-header').each(function(){var phone=$(this).html();$('.mm-menu-footer .contact-phone').append(phone);});};if($('.acount-section .flag-select').length){$('.acount-section .flag-select').each(function(){$('.mm-menu-head .flag-holder').append($(this).parent().html());});};$('.mm-mobile-menu .base-menu > li > a').each(function(index){var link_dd=$(this);if($(this).parent().find('ul').length){$(this).next('ul').removeClass('drop-list').addClass('menu-dd');if($(this).next('.menu-dd').find('.drop-list').length){$(this).next('.menu-dd').find('.drop-list').removeClass('drop-list');}
$(this).find('.fa').attr('data-id','drop_'+(index+1));$(this).next('.menu-dd').attr('id','drop_'+(index+1));if(!$('.-g-menu-category-open-down').length){var title_link=$(this).text();$(this).next('.menu-dd').prepend('<div class="mm-drop-head"><i class="fa fa-angle-left mm-btn-prev"></i>'+title_link+'</div>');var drop_down=$(this).next('.menu-dd').detach();$('.mm-mobile-menu').append(drop_down);}
$(this).find('.fa').addClass('mm-btn-next').insertAfter(link_dd);if(!$('.-g-menu-category-open-down').length){link_dd.next('.mm-btn-next').click(function(){$(this).parent().addClass('opened');var attr=$(this).attr('data-id');$('.mm-mobile-menu #'+attr+'').addClass('visible');$('.mm-mobile-menu .base-menu').addClass('opened-base');});$('.mm-btn-prev').click(function(){$('.mm-mobile-menu .base-menu > li').removeClass('opened');$('.mm-mobile-menu .menu-dd').removeClass('visible');$('.mm-mobile-menu .base-menu').removeClass('opened-base');});}else{link_dd.next('.mm-btn-next').click(function(){$(this).parent().toggleClass('opened');var attr=$(this).attr('data-id');$('.mm-mobile-menu #'+attr+'').toggleClass('visible');$('.mm-mobile-menu .base-menu').toggleClass('opened-base');});}}});$('.mm-mobile-menu .menu-dd').each(function(){if($(this).find('.cat-img').length){var fashion_banner=$(this).find('.cat-img').html();$(this).find('ul').prepend('<li class="image">'+fashion_banner+'</li>');$(this).find('.cat-img').remove();}});}
if($('.mm-nav-filter .filter.box.-g-category-sidebar-leaf').length){$('.mm-nav-filter .filter.box.-g-category-sidebar-leaf').insertAfter('.mm-nav-filter  .filter.box:last');}
if($('.menu-trg').length||$('.filter-trg').length){$('.menu-trg, .filter-trg').attr('href','#').addClass('-g-no-url');}});